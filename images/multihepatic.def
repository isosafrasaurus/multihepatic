Bootstrap: docker
From: ghcr.io/isosafrasaurus/tacc-mvapich2.3-python3.12-graphnics:latest

%files
    requirements.txt /tmp/requirements.txt

%post
    pip install --no-cache-dir -r /tmp/requirements.txt
    mkdir -p /opt/matplotlib-config
    chmod 777 /opt/matplotlib-config

    # Cleanup
    rm /tmp/requirements.txt

%environment
    export MPLCONFIGDIR=/opt/matplotlib-config
    
    # Ensure standard encoding
    export LC_ALL=C
